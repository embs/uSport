<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= content_for?(:title) ? yield(:title) : "USport" %></title>
    <style>
      .wrapper {
        max-width: 1360px;
        margin: auto;
      }
    </style>
    <%= csrf_meta_tags %>

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js" type="text/javascript"></script>
    <![endif]-->

    <%= stylesheet_link_tag "application", media: "all" %>
    <%= stylesheet_link_tag "bootstrap", media: "all" %>
    <%= stylesheet_link_tag "bootstrap-responsive", media: "all" %>

    <!-- For third-generation iPad with high-resolution Retina display: -->
    <!-- Size should be 144 x 144 pixels -->
    <%#= favicon_link_tag 'images/apple-touch-icon-144x144-precomposed.png', :rel => 'apple-touch-icon-precomposed', :type => 'image/png', :sizes => '144x144' %>

    <!-- For iPhone with high-resolution Retina display: -->
    <!-- Size should be 114 x 114 pixels -->
    <%#= favicon_link_tag 'images/apple-touch-icon-114x114-precomposed.png', :rel => 'apple-touch-icon-precomposed', :type => 'image/png', :sizes => '114x114' %>

    <!-- For first- and second-generation iPad: -->
    <!-- Size should be 72 x 72 pixels -->
    <%#= favicon_link_tag 'images/apple-touch-icon-72x72-precomposed.png', :rel => 'apple-touch-icon-precomposed', :type => 'image/png', :sizes => '72x72' %>

    <!-- For non-Retina iPhone, iPod Touch, and Android 2.1+ devices: -->
    <!-- Size should be 57 x 57 pixels -->
    <%#= favicon_link_tag 'images/apple-touch-icon-precomposed.png', :rel => 'apple-touch-icon-precomposed', :type => 'image/png' %>

    <!-- For all other devices -->
    <!-- Size should be 32 x 32 pixels -->
    <%#= favicon_link_tag 'favicon.ico', :rel => 'shortcut icon' %>
    <% unless Rails.env != 'production' %>
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-39914252-1', 'usport.com.br');
        ga('send', 'pageview');

      </script>
    <% end %>
    <script src="http://js.pusher.com/2.0/pusher.min.js"></script>
    <script type="text/javascript">
      var pusher = new Pusher('<%= Pusher.key %>');
    </script>
  </head>
  <body>
    <div class="wrapper">
      <%= render partial: "shared/navbar" %>
      <div class="container-fluid">
        <div class="row-fluid">
          <%= content_for :top_of_content %>
          <div class="span2 visible-desktop">
            <%= yield :left_side_bar %>
          </div>
          <div class="span10">
            <%= bootstrap_flash %>
            <%= yield %>
          </div>
        </div>
      </div>
      <%= render partial: "shared/footer" %>
    </div>

    <!-- Javascripts
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <%= javascript_include_tag (content_for?(:include_js) ? yield(:include_js) : "application") %>
    <%= yield :show_move_comments %><%# SÃ³ para move/show %>
    <% if @matches %>
      <% @matches.each do |match| %>
        <script type="text/javascript">
          var <%= "presenceChannelMatch#{match.id}" %> = pusher.subscribe('presence-match-<%= match.id %>');
          <%= "presenceChannelMatch#{match.id}" %>.bind('pusher:subscription_succeeded', function() {
            $('#match-<%= match.id %>-viewers').html(<%= "presenceChannelMatch#{match.id}" %>.members.count);
          });
          <%= "presenceChannelMatch#{match.id}" %>.bind('pusher:member_added', function(member) {
            $('#match-<%= match.id %>-viewers').html(<%= "presenceChannelMatch#{match.id}" %>.members.count - 1);
          });
          <%= "presenceChannelMatch#{match.id}" %>.bind('pusher:member_removed', function(member) {
            $('#match-<%= match.id %>-viewers').html(<%= "presenceChannelMatch#{match.id}" %>.members.count - 1);
          });
        </script>
      <% end %>
    <% end %>
  </body>
</html>
